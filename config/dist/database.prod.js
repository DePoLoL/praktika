"use strict";function _slicedToArray(e,r){return _arrayWithHoles(e)||_iterableToArrayLimit(e,r)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function _iterableToArrayLimit(e,r){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)){var t=[],n=!0,o=!1,a=void 0;try{for(var s,i=e[Symbol.iterator]();!(n=(s=i.next()).done)&&(t.push(s.value),!r||t.length!==r);n=!0);}catch(e){o=!0,a=e}finally{try{n||null==i.return||i.return()}finally{if(o)throw a}}return t}}function _arrayWithHoles(e){if(Array.isArray(e))return e}function _classCallCheck(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,r){for(var t=0;t<r.length;t++){var n=r[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function _createClass(e,r,t){return r&&_defineProperties(e.prototype,r),t&&_defineProperties(e,t),e}var mysql=require("mysql2/promise");require("dotenv").config();var Database=function(){function e(){_classCallCheck(this,e),this.config={host:process.env.DB_HOST||"localhost",user:process.env.DB_USER||"root",password:process.env.DB_PASSWORD||"",database:process.env.DB_NAME||"test_db",port:process.env.DB_PORT||3306,waitForConnections:!0,connectionLimit:5,queueLimit:0},this.pool=null}return _createClass(e,[{key:"connect",value:function(){var r;return regeneratorRuntime.async(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,this.pool=mysql.createPool(this.config),e.next=4,regeneratorRuntime.awrap(this.pool.getConnection());case 4:return r=e.sent,console.log("âœ… Ð£ÑÐ¿ÐµÑˆÐ½Ð¾ Ð¿Ð¾Ð´ÐºÐ»ÑŽÑ‡ÐµÐ½Ð¾ Ðº Ð±Ð°Ð·Ðµ Ð´Ð°Ð½Ð½Ñ‹Ñ… MySQL"),r.release(),e.abrupt("return",this.pool);case 10:e.prev=10,e.t0=e.catch(0),console.error("âŒ ÐžÑˆÐ¸Ð±ÐºÐ° Ð¿Ð¾Ð´ÐºÐ»ÑŽÑ‡ÐµÐ½Ð¸Ñ Ðº Ð±Ð°Ð·Ðµ Ð´Ð°Ð½Ð½Ñ‹Ñ…:",e.t0.message),process.exit(1);case 14:case"end":return e.stop()}},null,this,[[0,10]])}},{key:"disconnect",value:function(){return regeneratorRuntime.async(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.pool)return e.next=3,regeneratorRuntime.awrap(this.pool.end());e.next=4;break;case 3:console.log("ðŸ“´ ÐžÑ‚ÐºÐ»ÑŽÑ‡ÐµÐ½Ð¾ Ð¾Ñ‚ Ð±Ð°Ð·Ñ‹ Ð´Ð°Ð½Ð½Ñ‹Ñ…");case 4:case"end":return e.stop()}},null,this)}},{key:"query",value:function(r){var t,n,o,a,s=arguments;return regeneratorRuntime.async(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=1<s.length&&void 0!==s[1]?s[1]:[],this.pool){e.next=4;break}return e.next=4,regeneratorRuntime.awrap(this.connect());case 4:return e.prev=4,e.next=7,regeneratorRuntime.awrap(this.pool.query(r,t));case 7:return n=e.sent,o=_slicedToArray(n,1),a=o[0],e.abrupt("return",a);case 13:throw e.prev=13,e.t0=e.catch(4),console.error("âŒ ÐžÑˆÐ¸Ð±ÐºÐ° Ð²Ñ‹Ð¿Ð¾Ð»Ð½ÐµÐ½Ð¸Ñ Ð·Ð°Ð¿Ñ€Ð¾ÑÐ°:",e.t0.message),e.t0;case 17:case"end":return e.stop()}},null,this,[[4,13]])}}]),e}();module.exports=new Database;